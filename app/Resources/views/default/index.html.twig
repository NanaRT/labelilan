{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <div class="row carousel-holder">
                    <div class="col-md-12">
                        <img width="100%" src="{{ asset('bundles/app/img/baniere.jpg') }}" />
                    </div>
                </div>

	            <div class="col-md-3">
	                <p class="lead">Label[i] Gaming Championship</p>
	                <div class="list-group">
						{%for category in categories%}
		                    <a href="#{{category.systName}}" class="list-group-item">{{category.name}}</a>
		                {%endfor%}
	                </div>
	            </div>
            
	            <div class="col-md-9">
					<div class="alert alert-danger" role="alert">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						    <span aria-hidden="true">&times;</span>
						</button>
					    <strong>Attention</strong> 
						Si un tournoi n'a pas suffisement d'inscrits le jour de l'événement, ce dernier sera annulé.
					</div>
		            <p>
			            Le Label[i] Gaming Championship est une LAN prenant place dans les locaux du CREMI à l’Université de Bordeaux à Talence durant la nuit du 18 au 19 mars 2016 de 18h à 8h du matin.
		            </p>
		            <p>
						Des tournois multijoueurs seront présents (League of Legends, Counter Strike) ainsi que des tournois solo (Hearthstone, Mario Kart, Smash Bros…). Les joueurs auront également tout au long de la nuit la possibilité de participer à des jeux libres (Rock Band, Guitar Hero) avec également une salle ayant à disposition des jeux de sociétés ainsi que des initiations au jeux de role.
		            </p>
		            <p>
		            	Il sera d'ailleurs également possible de prêter du matériel pour les tournois (pc, écran, souris et clavier) !
					</p>
					{%for category in categories%}
	                	<div class="row">
							<section id="{{category.systName}}">
								<div class="col-sm-12 col-lg-12 col-md-12">
									<h1>{{category.name}}</h1>
									{%for game in category.game%}
					                    <div class="col-sm-4 col-lg-4 col-md-4 col-xs-12">
					                        <div class="thumbnail">
					                            <a href="{{path('game_show', {'id':game.id}) }}" >
						                        	<div id="gameImg">
						                            	<img src="{{ asset('bundles/app/img/game/'~game.systName~'.jpg') }}" alt="{{game.name}}">
						                            </div>
						                        </a>
					                            <div class="caption">
					                                <h4>
					                                	<a href="{{path('game_show', {'id':game.id}) }}" >
					                                		{{game.name}}
					                                	</a>
					                                </h4>
					                                <p>
					                                	Organisé par 
					                                	<a href="{{ path('informations') }}#{{game.organizer.systName}}">
					                                		{{game.organizer.name}}
					                                	</a>
					                                </p>
				                                	{%if category.systName=='multi'%}
									                	<a class="btn btn-default" href="{{path('user_recruit', {'gameId':game.id}) }}" >
									                		<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
									                		Chercher Joueurs
									                	</a>
											        	<a class="btn btn-default" href="{{path('team_recruit', {'gameId':game.id}) }}" >
									                		<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
									                		Chercher Equipe
									                	</a>
									                	{%if (is_granted("IS_AUTHENTICATED_REMEMBERED"))%}
									                		{%for player in searchCategoryService.getPlayerGame(app.user.id, game.id)%}
																{%if player.team is null
																and player.capitain is null %}
												                	<a class="btn btn-default" href="{{path('team_new', {'user':app.user.id, 'game':game.id}) }}" >
												                    	 <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
												                    </a>
															    {%endif%}
															{%endfor%}
														{%endif%}
													{%else%}
						                                <p>
						                                	{{game.description}}
						                                </p>
									                {%endif%}
					                                </p>
					                            </div>
					                            <div class="ratings">
					                                <p class="pull-right">
						      							{% if (is_granted("IS_AUTHENTICATED_REMEMBERED")) %}
							      							{% if (category.systName == 'multi' or category.systName == 'solo')%}
							      								{%if searchCategoryService.checkPlaces(game.id) == 1
							      								and searchCategoryService.getCreatedPlayer(app.user.id, game.id) == 0%}
									                                <a class="btn btn-default" href="{{path('player_new', {'userId':app.user.id, 'gameId':game.id}) }}" >
									                                	 <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> S'inscrire
									                                </a>
												                {%else%}
												                    <a class="btn btn-default disabled" href="{{path('player_new', {'userId':app.user.id, 'gameId':game.id}) }}" >
												                    	 Inscrit
												                    </a>
												                {%endif%}
							      							{% elseif category.systName == 'autre'
							      							or category.systName == 'libre'%}
							      								{%if searchCategoryService.getCreatedPlayer(app.user.id, game.id) == 0%}
									                                <a class="btn btn-default" href="{{path('new_free_player', {'userId':app.user.id, 'gameId':game.id,'origin':'index'}) }}" >
									                                	 <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Intéréssé
									                                </a>
												                {%else%}
												                    <a class="btn btn-default disabled" href="{{path('new_free_player', {'userId':app.user.id, 'gameId':game.id,'origin':'index'}) }}" >
												                    	 Intéréssé
												                    </a>
												                {%endif%}
								                            {%endif%}
							                            {%endif%}
													</p>
					                                <p>
					                                	{%if category.systName == 'multi' %}
					                                		Nb équipes restantes : {{ searchCategoryService.getMultiPlaces(game.id) }}
					                                	{% elseif category.systName == 'solo'
					                                	and game.places%}
					                                		Nb places : {{ searchCategoryService.getSoloPlaces(game.id) }}
					                                	{% else%}
							      							<p id="interesse">
							      								Nb intéressés : {{ searchCategoryService.getNumberPlayer(game.id) }}
							      							</p>
							                            {%endif%}        
					                                </p>
					                            </div>
					                        </div>
					                    </div>
									{%endfor%}
									<br>
		                    	</div>
		                    </section>
	                	</div>
			        {%endfor%}
				</div>
            </div>
        </div>
    </div>
{% endblock %}

